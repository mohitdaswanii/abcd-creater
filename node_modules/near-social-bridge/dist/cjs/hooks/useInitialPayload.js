"use strict";
exports.__esModule = true;
var react_1 = require("react");
var bridge_service_1 = require("../services/bridge-service");
/**
 * Get the initial payload sent by View (VM)
 * @returns Initial payload sent by View
 */
var useInitialPayload = function () {
    var _a = (0, react_1.useState)((0, bridge_service_1.getConnectionPayload)().initialPayload), initialPayload = _a[0], setInitialPayload = _a[1];
    (0, react_1.useEffect)(function () {
        if ((0, bridge_service_1.getConnectionStatus)() === 'connected') {
            setInitialPayload((0, bridge_service_1.getConnectionPayload)().initialPayload);
        }
        var handler = function (payload) {
            setInitialPayload(payload.initialPayload);
        };
        bridge_service_1.onConnectObservable.subscribe(handler);
        return function () {
            bridge_service_1.onConnectObservable.unsubscribe(handler);
        };
    }, []);
    return initialPayload;
};
exports["default"] = useInitialPayload;
